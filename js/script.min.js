var navbar,navbarSections,active_section=null,active_work="",active_photo=null;history.pushState(null,null,window.location.pathname);window.addEventListener("popstate",()=>{navbarSections.forEach(s=>{s.classList.remove("active")});hideAllSections()});document.addEventListener("DOMContentLoaded",()=>{navbar=document.getElementById("navigation");navbarSections=navbar.querySelectorAll(".section-title");navbarSections.forEach(section=>{section.onmouseover=(()=>killWave());section.onmouseout=(()=>{if(active_section===null)startWave()})});ripple(1e3);startWave()},false);const COLOR_SCHEMES={1:["#EA4347","#6DC1C5","#30B06A","#F7C83B"],2:["#F05C88","#6F7DF6","#77CBF9","#FFA805"],3:["#DE5E5E","#45B6EF","#42B362","#DFA8FF"],4:["#DA496B","#4D63D1","#629337","#F57E09"],5:["#EFC2B8","#95BBD9","#BCDC96","#EEDE97"],6:["#913030","#275A77","#246B50","#C28147"]};function changeColorScheme(index=-1,shuffle=true){if(index<=0||index>Object.keys(COLOR_SCHEMES).length){return"Please enter a valid index"}index=index||Math.floor(Math.random()*Object.keys(COLOR_SCHEMES).length+1);var scheme=COLOR_SCHEMES[index];scheme=shuffle?scheme.sort(()=>{return.5-Math.random()}):scheme;var root=document.documentElement;root.style.setProperty("--color-one",scheme[0]);root.style.setProperty("--color-two",scheme[1]);root.style.setProperty("--color-three",scheme[2]);root.style.setProperty("--color-four",scheme[3]);return index}var currentSchemeIndex=changeColorScheme(1);function changeColours(c1,c2,c3,c4){var root=document.documentElement;root.style.setProperty("--color-one",c1);root.style.setProperty("--color-two",c2);root.style.setProperty("--color-three",c3);root.style.setProperty("--color-four",c4);currentSchemeIndex=-1;return"New Colours: "+c1+", "+c2+", "+c3+", "+c4}console.log(`changeColours('#AAAAAA', '#BBBBBB', '#CCCCCC', '#DDDDDD')`);var isWavy=section=>section.classList.contains("wave");function bucket(el){var isWavy=Array.prototype.slice.call(navbarSections).some(section=>section.classList.contains("wave"));var numberOfSchemes=Object.keys(COLOR_SCHEMES).length;var nextSchemeIndex=currentSchemeIndex;while(nextSchemeIndex===currentSchemeIndex){nextSchemeIndex=Math.floor(Math.random()*numberOfSchemes)+1}el.parentElement.classList.remove("default-colors");el.parentElement.classList.add("changed");document.querySelector("bucket-tooltip-action");animateIn(".bucket-tooltip-action","fade-in",()=>{animateOut(".bucket-tooltip-action","fade-out",null,1500)},1);if(isWavy){killWave();setTimeout(()=>{currentSchemeIndex=changeColorScheme(nextSchemeIndex);ripple();if(active_section===null)startWave()},400)}else{currentSchemeIndex=changeColorScheme(nextSchemeIndex);ripple()}track("#bucket",nextSchemeIndex,"click")}function ripple(interval=0){setTimeout(function(){navbarSections.forEach((s,i,sections)=>{setTimeout(rippleUp,150*i,s);setTimeout(rippleDown,sections.length*150+200*i,s)})},interval)}function rippleUp(section){section.classList.add("wave")}function rippleDown(section){section.classList.remove("wave")}var wave;function startWave(){clearInterval(wave);wave=setInterval(ripple,4e3)}function killWave(){clearInterval(wave);navbarSections.forEach(s=>{s.classList.remove("wave")})}function sectionPicker(navButton){var sectionName=navButton.querySelector("span").getAttribute("data-content");killWave();navbar.classList.remove("active");navbarSections.forEach(s=>{s.classList.remove("active")});if(sectionName===active_section){hideAllSections();track("#","Back to Home","pageview")}else{showSection(sectionName);navbar.setAttribute("data-bg-color",navButton.getAttribute("data-bg-color"));navbar.setAttribute("data-open","true");navbar.classList.add("active");navButton.classList.add("active");document.getElementById("section-container").classList.add("active");history.pushState("","","#");track(`#${sectionName}`,sectionName,"pageview")}}function hideAllSections(){navbar.setAttribute("data-open","false");document.getElementById("section-container").classList.remove("active");document.getElementById("hero").classList.remove("minimize");ripple(1e3);startWave();history.pushState(null,null,window.location.pathname);animateOut("#"+active_section,"fade-out-bottom");active_section=null}function showSection(sectionName){switch(sectionName){case"work":if(active_work==="")break;document.querySelector(".work.active").classList.remove("active");document.getElementById(active_work).classList.add("hidden");active_work="";break;case"skills":document.querySelectorAll(".img-skill").forEach(img=>{img.src=img.getAttribute("data-src")});break;case"photos":genThumbnails();break;case"about":document.getElementById("me-jpg").src="assets/me.jpg";document.getElementById("me-gif").src="assets/me.gif";break}if(active_section===null){document.getElementById("hero").classList.add("minimize");setTimeout(()=>{document.getElementById(sectionName).classList.remove("hidden")},1e3)}else{window.scroll({top:0,left:0,behavior:"smooth"});animateOut(`#${active_section}`,"fade-out-bottom",()=>{document.getElementById(sectionName).classList.remove("hidden")})}active_section=sectionName}function workPicker(element,workName){var card=document.getElementById(workName);if(active_work!==""&&active_work!=workName){document.querySelector(".work.active").classList.remove("active");animateOut(`#${active_work}`,"fade-out-right",()=>{card.classList.remove("hidden")})}else{card.classList.remove("hidden")}element.classList.add("active");active_work=workName;track("#work",workName,"click");if(window.innerWidth<=640){card.parentElement.scrollIntoView({behavior:"smooth"})}}function genThumbnails(){const thumbContainer=document.getElementById("thumbnail-container");const delay=2e3;var thumbs=[];thumbContainer.innerHTML="";PHOTOS.sort(()=>{return.5-Math.random()});PHOTOS.forEach((t,i)=>{var thumb=Object.assign(document.createElement("div"),{className:"thumb fade-in-up",style:`animation-delay: ${i<15?delay+parseInt(i*100):0}ms`,onclick:()=>openPhotoModal(i)});var placeholder=Object.assign(document.createElement("div"),{className:"placeholder",style:`background-color: ${t.bg}`});thumb.appendChild(placeholder);var img=Object.assign(document.createElement("img"),{src:`assets/photos/thumb/${t.index}.jpg`,onload:()=>{placeholder.style.opacity=0;setTimeout(()=>{placeholder.style.display="none"},500)},onerror:()=>{placeholder.style.display="none"}});img.onmouseover=(()=>{setTimeout(()=>{img.addEventListener("mousemove",panZoom,false,this)},300)});img.onmouseout=(()=>{img.removeEventListener("mousemove",panZoom)});thumb.appendChild(img);thumbContainer.appendChild(thumb)})}function panZoom(e){e.target.style.transformOrigin=`${e.offsetX}px ${e.offsetY}px`}function openPhotoModal(i){loadPhoto(i);animateIn(".photo-modal","slide-in-up",null,500);document.addEventListener("keydown",escapeToClose)}function loadPhoto(i,delay=0){Object.assign(document.createElement("img"),{src:`assets/photos/${PHOTOS[i].index}.jpg`,onload:()=>{setTimeout(()=>{document.querySelector(".photo-container").style.backgroundImage=`url('assets/photos/${PHOTOS[i].index}.jpg')`;endLoadingAnimation();track("#photos",identifyPhoto(PHOTOS[i].caption),"click")},delay)},onerror:()=>{endLoadingAnimation()}});document.querySelector(".caption").innerHTML=formatCaptions(PHOTOS[i].caption);active_photo=i;var next=document.querySelector(".modal-next-btn");var prev=document.querySelector(".modal-prev-btn");if(active_photo+1>=PHOTOS.length){next.classList.add("disabled")}else if(active_photo<=0){prev.classList.add("disabled")}else{next.classList.remove("disabled");prev.classList.remove("disabled")}}function nextPhoto(){if(active_photo+1>=PHOTOS.length)return;active_photo++;startLoadingAnimation(true);loadPhoto(active_photo,500)}function prevPhoto(){if(active_photo<=0)return;active_photo--;startLoadingAnimation(true);loadPhoto(active_photo,500)}function endLoadingAnimation(){var modalDiv=document.querySelector(".modal-content");var bars=modalDiv.querySelectorAll(".bar");var animationCount=bars.length;var completedAnimations=0;bars.forEach((bar,i)=>{bar.addEventListener("animationiteration",function _listener(e){if(i===0||completedAnimations>0){e.target.classList.add("done");completedAnimations++;bar.removeEventListener("animationiteration",_listener)}if(completedAnimations>=animationCount){setTimeout(()=>{modalDiv.classList.add("loaded");return},500)}})});setTimeout(()=>{modalDiv.classList.add("loaded");return},4e3)}function startLoadingAnimation(alreadyOpen=false){var modalDiv=document.querySelector(".modal-content");modalDiv.classList.remove("loaded");if(alreadyOpen){modalDiv.classList.add("no-staggered-delays")}else{modalDiv.classList.remove("no-staggered-delays")}modalDiv.querySelectorAll(".bar").forEach((bar,i)=>{setTimeout(()=>{bar.classList.remove("done")},i*100)})}function formatCaptions(c){var locationIndex=c.lastIndexOf(",",c.lastIndexOf(",")-1)+1;return c.substr(0,locationIndex)+"<br>"+c.substr(locationIndex)}function identifyPhoto(c){if(c.substr(0,c.indexOf(",")).indexOf("Park")>=0||c.indexOf(",")<=12)return c.substr(0,c.indexOf(","));var stop=c.indexOf(" ");while(stop<12){stop=c.indexOf(" ",stop+1);if(c.indexOf(",")<=stop)return c.substr(0,c.indexOf(","))}return c.substr(0,stop)}function escapeToClose(e){if(e.keyCode===27){closePhotoModal()}}function closePhotoModal(){animateOut(".photo-modal","slide-out-bottom",()=>{document.querySelector(".photo-container").style.backgroundImage="";document.querySelector(".caption").innerHTML="";startLoadingAnimation()});document.removeEventListener("keydown",escapeToClose)}function track(href,name,eventType){if(typeof clicky==="undefined")return;clicky.log(href,name,eventType)}function animateOut(elementName,animationName,callback,animationDuration=500){var el=document.querySelector(elementName);el.classList.add(animationName);setTimeout(()=>{el.classList.remove(animationName);el.classList.add("hidden");if(callback)callback()},animationDuration,el,animationName,callback)}function animateIn(elementName,animationName,callback,animationDuration=500){var el=document.querySelector(elementName);el.classList.remove("hidden");el.classList.add(animationName);setTimeout(()=>{el.classList.remove(animationName)},animationDuration,el);if(callback)callback()}const PHOTOS=[{index:0,bg:"#89979A",caption:"Kangchendzonga National Park, Sikkim, India"},{index:1,bg:"#6D86B8",caption:"Half Dome from Glacier Point, Yosemite National Park, California"},{index:2,bg:"#82B0D8",caption:"Blue Lake, Inyo National Forest, California"},{index:3,bg:"#B36F3C",caption:"Lakes Trail, Kings Canyon National Park, California"},{index:4,bg:"#2F343B",caption:"Horsetooth Mountain, Fort Collins, Colorado"},{index:5,bg:"#B8C9CC",caption:"Dolores Park, Mission, San Francisco, California"},{index:6,bg:"#8B6151",caption:"Kaibab National Forest, Grand Canyon, Arizona"},{index:7,bg:"#6C7971",caption:"Perugia, Cambria, Italy"},{index:8,bg:"#B26542",caption:"Alghero, Sardinia, Italy"},{index:9,bg:"#5E6C3C",caption:"Rifugio Menaggio, Lake Como, Italy"},{index:10,bg:"#5575C0",caption:"Puez-Geisler National Park, South Tyrol, Italy"},{index:11,bg:"#486BA1",caption:"Peak of Monte Grona, Lake Como, Italy"},{index:12,bg:"#7082A2",caption:"Puez-Geisler National Park, South Tyrol, Italy"},{index:13,bg:"#ADB9D1",caption:"Vembanad Lake, Cochin, Kerala, India"},{index:14,bg:"#6A723E",caption:"Angel Island State Park, San Francisco Bay, California"},{index:15,bg:"#8A7C4C",caption:"Soberanes Point, Carmel, Monterey, California"},{index:16,bg:"#EC965C",caption:"West Point Lighthouse, Discovery Park, Seattle, Washington"},{index:17,bg:"#D6D3CE",caption:"Wallace Falls State Park, Snohomish County, Washington"},{index:18,bg:"#9C7E52",caption:"Laguna Creek Beach, Santa Cruz, California"},{index:19,bg:"#CBAC86",caption:"Tent Rocks National Monument, Sandoval County, New Mexico"},{index:20,bg:"#454934",caption:"Gennargentu National Park, Cala Ganone, Sardinia, Italy"},{index:21,bg:"#94ABBD",caption:"McLaren Park, San Francisco, California"},{index:22,bg:"#2F3411",caption:"Angel Island State Park, San Francisco Bay, California"},{index:23,bg:"#A73E28",caption:"Prewitt Ridge, Big Sur, California"},{index:24,bg:"#536C8B",caption:"Yosemite Falls Trail, Yosemite National Park, California"},{index:25,bg:"#808B63",caption:"Kangchendzonga National Park, Sikkim, India"},{index:26,bg:"#546420",caption:"Briones Regional Park, Lafayette, California"},{index:27,bg:"#D8DEE0",caption:"Mendocino Headlands State Park, Mendocino, California"},{index:28,bg:"#709BC3",caption:"Four Mile Trail, Yosemite National Park, California"},{index:29,bg:"#E9906E",caption:"Shilshole Bay, Ballard, Seattle, Washington"}];